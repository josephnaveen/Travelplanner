<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Travel Planner Website">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <meta name="author" content="Ryuu">
    <title>Plan My Path</title>
    <title>Plan My Path</title>
    <link rel="stylesheet" href="./Assets/css/style.css">
    <link rel="stylesheet" href="./Assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" href="./Assets/Images/jumbo-image.png">
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

</head>
<body>
    <!--Navbar Section-->
    <section id="nav-bar">
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container-fluid">
              <a class="navbar-brand" href="#"><img src="/Assets/Images/jumbo-image.png"><P>Plan My Path</P></a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa fa-bars" aria-hidden="true"></i>
              </button>
              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                  <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/index.html">HOME</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="/tours.html">TOURS</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="/hotels.html">HOTELS</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="/about.html">ABOUT US</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="/contact.html">CONTACT</a>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
    </section>
<!---delay form-->
<section id="delay-form">
  <div class="regform">
      <h3 class="define8">Booking Form</h3>
      <div class="form">
          <form id="booking-form">  <!-- ADDED ID HERE -->
              <div class="input">
                  <label for="first-name">First Name</label>
                  <input type="text" placeholder="First Name" id="first-name" required>
              </div>
              <div class="input">
                  <label for="last-name">Last Name</label> 
                  <input type="text" placeholder="Last Name" id="last-name" required>
              </div>
              <div class="input">
                  <label for="email">Email</label>
                  <input type="email" placeholder="Email" id="email" required>
              </div>
              <div class="input">
                  <label for="phone">Contact</label>
                  <input type="tel" placeholder="Phone Number" id="phone" required>
              </div>
              <div class="input">
                  <label for="date">Date</label>
                  <input type="date" id="date" required>
              </div>
              <div class="input">
                  <label for="tour">Tour</label>
                  <select id="tour" class="dropdown">
                      <option value="Badrinath Temple">Badrinath Temple</option>
                      <option value="Bangalore">Bangalore</option>
                      <option value="Goa">Goa</option>
                      <option value="Mysore">Mysore</option>
                      <option value="Taj Mahal">Taj Mahal</option>
                      <option value="Varkala">Varkala</option>
                      <option value="Wonderla">Wonderla</option>
                      <option value="Andaman & Nicobar">Andaman & Nicobar</option>
                      <option value="Andhra Pradesh">Andhra Pradesh</option>
                      <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                      <option value="Bihar">Bihar</option>
                      <option value="Chandigarh">Chandigarh</option>
                      <option value="Delhi">Delhi</option>
                      <option value="Guwahati">Guwahati</option>
                      <option value="Haryana">Haryana</option>
                      <option value="Himachal Pradesh">Himachal Pradesh</option>
                      <option value="Kerala">Kerala</option>
                      <option value="Ladakh">Ladakh</option>
                      <option value="Lakshadweep">Lakshadweep</option>
                      <option value="Tamilnadu">Tamilnadu</option>
                      <option value="West Bengal">West Bengal</option>
                  </select>
              </div>
              <div class="input">
                  <label for="hotel">Hotel</label>
                  <select id="hotel" class="dropdown">
                      <option value="Resort 1">Resort 1</option>
                      <option value="Resort 2">Resort 2</option>
                      <option value="Resort 3">Resort 3</option>
                      <option value="Resort 4">Resort 4</option>
                      <option value="Resort 5">Resort 5</option>
                      <option value="Resort 6">Resort 6</option>
                  </select>
              </div>
              <div class="btn1">
                  <button type="submit">Book Now <i class="fa fa-circle" aria-hidden="true"></i></button>
              </div>
          </form>
      </div>
  </div>
  

<!--footer-->
<section id="footer">
    <footer class="footer1 text-light pb-4 pt-5">
        <div class="container text-center text-md-left">
          <div class="row text-center text-md-left">
            <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
              <h3 class="text-uppercase mb-4 font-weight-bold">Travel Planner</h3>
              <p>Dreams of travel, places to see,
                We will plan the path, you just roam free.
              From start to finish, we have got it all,
                Your adventure awaits, just make the call!</p>
           </div>
           <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
            <h3 class="text-uppercase mb-4 font-weight-bold"> Plans</h3>
            <p><a href="/tours.html" class="text-white" style="text-decoration: none;">Tours</a></p>
            <p><a href="/hotels.html" class="text-white" style="text-decoration: none;">Hotels</a></p>
            <p><a href="/tours.html" class="text-white" style="text-decoration: none;">Transportation</a></p>
          </div>
      <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
      <h3 class="text-uppercase mb-4 font-weight-bold">links</h3>
      <p><a href="/contact.html" class="text-white" style="text-decoration: none;">Contact</a></p>
      <p><a href="/about.html" class="text-white" style="text-decoration: none;">About</a></p>
      <p><a href="/contact.html" class="text-white" style="text-decoration: none;">Help</a></p>
      </div>
      </div>
      <hr class="mb-4">
      <div class="row align-item-center">
        <div class="col-md-8 col-lg-7">
          <p>Copyright 2020 All rights reserved by: <a href="/secret.html" style="text-decoration: none;"><strong style="text-decoration: none;">Travel Planner</strong></a></p>
        </div>
      </div>
        </div>
      </footer>
</section>

<!-- Firebase Integration -->
<script type="module" src="./Assets/js/firebase.js"></script>
<script type="module">
    import { db, collection, addDoc } from "./Assets/js/firebase.js";

    document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("booking-form");

        form.addEventListener("submit", async function (e) {
            e.preventDefault();

            const firstName = document.getElementById("first-name").value;
            const lastName = document.getElementById("last-name").value;
            const email = document.getElementById("email").value;
            const phone = document.getElementById("phone").value;
            const date = document.getElementById("date").value;
            const tour = document.getElementById("tour").value;
            const hotel = document.getElementById("hotel").value;

            try {
              const docRef = await addDoc(collection(db, "bookings"), {
                    firstName,
                    lastName,
                    email,
                    phone,
                    date,
                    tour,
                    hotel,
                    timestamp: new Date()
                });

                const referenceId = docRef.id; //
                alert("Booking Successful!");
                const bookingDetails =`booked.html?ref=${referenceId}&firstName=${encodeURIComponent(firstName)}&lastName=${encodeURIComponent(lastName)}&email=${encodeURIComponent(email)}&phone=${encodeURIComponent(phone)}&date=${encodeURIComponent(date)}&tour=${encodeURIComponent(tour)}&hotel=${encodeURIComponent(hotel)}`;
                 window.location.href = bookingDetails;
                form.reset();
                // window.location.href = "/booked.html";  // Redirect after success
            } catch (error) {
                console.error("Error adding document:", error);
                alert("Booking Failed!");
            }
        });
    });
</script>
<script src = "./Assets/js/email.js"></script>
<script src="./Assets/js/jquery.js"></script>
<script src="./Assets/js/bootstrap.min.js"></script>
</body>
</html>
